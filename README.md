## LBP(LOCAL BINARY Patterns) 局部二值化的影像轉換演算法
### 簡述：
本題描述一個LBP(LOCAL BINARY Patterns)的演算電路，本文章僅供學術分享與心得交流，希望可以幫助到有準備參加比賽練習考古題的同學。

這一次的競賽當中要求**Simulation Timing * Cell Area <= 12,000,000,000為CLASS A**
這次實際應用One hot encoding的方式進行代碼設計，並且在compiler directives使用 
**sysnopsys parallel_case**來進行onehot的優化。(不過筆者在後續研究後發現，其實這部分如果default為auto的話,dc或dcnxt會自己選擇比較適合的方式來幫忙進行優化。)

---

最終結果為
* Simulation Time: 1047858 ns
* Cell Area: 9984 (dcnxt使用compile ultra指令合成)
* 成績結果為 Class A



| Simulation Time | Cell Area | Class |
| -------- | -------- | -------- |
| 1047858 ns     | 9984    | A    |


---
### 核心思維：
記得碩零剛加入實驗室時，沒有足夠好的硬體概念，當初曾經想過把整張圖片進行轉換完之後再輸出，其結果就會變成使用了一個超級high cost，大到不行的記憶體來進行圖片存取。一年過後重新回首來寫這題，起初打算利用line buffer的概念將第一條的影像數值給存起來，之後第二條存取三個影像的數值，之後進行運算完成後寫入記憶體，接著將新數值讀入並取代最初寫入的數值，如此重複以此類推。

然而，上述所提的方式其實會遇到寫到最右邊時必須要考慮下一列要從最右邊寫到最左邊，增加了一定程度的控制電路負擔，並且不太符合硬體簡單化、標準化、好追蹤的這種概念，最後經過思考，稍微估計了一下timing之後就直接果斷選擇一次讀9個pixel寫出一個數值的辦法了。

我自己的做法首先將kernel內的位址給定義好，kernel center為目前的操作點，位址即為  

| 操作點-129 | 操作點-128 | 操作點-127 |
| -------- | -------- | -------- |
| 操作點-1    | 操作點     | 操作點+1     |
| 操作點+127 | 操作點+128 | 操作點+129  |

接著只要針對操作點的address進行FSM的控制，依序輸出LBP的運算結果到ROM當中就可以了，
組合邏輯的部分雖然有使用一些技巧，但實在族繁不及備載，一個一個列出也會壞了讀者自己做實驗的興致，因此就交給讀者自行研究了。

---

#### 由於尊重主辦方，所有的設計及製程文件請到`https://www.iccontest2023.com.tw/` 當中下載。
#### 本文僅提供 Source Code 及 Timing/Area log 做為參考 歡迎大家一起交流分享。
